<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.0.6" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.0.6">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.0.6">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.0.6">


  <link rel="mask-icon" href="/images/logo.svg?v=6.0.6" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '6.0.6',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="CGD çš„ç®€è¿°GCD å…¨ç§° Grand Central Dispatchã€‚ç®€å•æ¥è¯´å°±æ˜¯ Apple å¯¹äºä¼˜åŒ–åº”ç”¨ç¨‹åºä»¥åŠæ”¯æŒå¤šæ ¸å¤„ç†å™¨æ‰€å¼€å‘çš„å¤šæ ¸ç¼–ç¨‹çš„æœ€æ–°è§£å†³æ–¹æ¡ˆã€‚æœ¬æ–‡ä¸»è¦å¯¹äºå¼€å‘ä¸­å¸¸ç”¨çš„è¿›è¡Œç®€è¿°ï¼Œä¸ä¼šé’ˆå¯¹åº•å±‚è§£æï¼Œæƒ³ç ”ç©¶åº•å±‚è¯·çœ‹è¿™é‡Œã€‚ æœ¬æ–‡ç¤ºä¾‹å‡é‡‡ç”¨ Swift 4 å®ç°ã€‚Swift 3 ä»¥å‰åœ¨å¼€å‘ä¸­ä½¿ç”¨ GCD ä¸æ˜¯å¤ªå‹å¥½ â€” ç”±äºå®ƒçš„ç¼–ç¨‹é£æ ¼æ¥è¿‘ Cï¼Œä¸ Swift style å·®åˆ«å¾ˆå¤§ï¼Œ">
<meta property="og:type" content="article">
<meta property="og:title" content="å¸¸ç”¨çš„ GCD">
<meta property="og:url" content="http://yoursite.com/2018/05/01/å…³äº GCD/index.html">
<meta property="og:site_name" content="Inception">
<meta property="og:description" content="CGD çš„ç®€è¿°GCD å…¨ç§° Grand Central Dispatchã€‚ç®€å•æ¥è¯´å°±æ˜¯ Apple å¯¹äºä¼˜åŒ–åº”ç”¨ç¨‹åºä»¥åŠæ”¯æŒå¤šæ ¸å¤„ç†å™¨æ‰€å¼€å‘çš„å¤šæ ¸ç¼–ç¨‹çš„æœ€æ–°è§£å†³æ–¹æ¡ˆã€‚æœ¬æ–‡ä¸»è¦å¯¹äºå¼€å‘ä¸­å¸¸ç”¨çš„è¿›è¡Œç®€è¿°ï¼Œä¸ä¼šé’ˆå¯¹åº•å±‚è§£æï¼Œæƒ³ç ”ç©¶åº•å±‚è¯·çœ‹è¿™é‡Œã€‚ æœ¬æ–‡ç¤ºä¾‹å‡é‡‡ç”¨ Swift 4 å®ç°ã€‚Swift 3 ä»¥å‰åœ¨å¼€å‘ä¸­ä½¿ç”¨ GCD ä¸æ˜¯å¤ªå‹å¥½ â€” ç”±äºå®ƒçš„ç¼–ç¨‹é£æ ¼æ¥è¿‘ Cï¼Œä¸ Swift style å·®åˆ«å¾ˆå¤§ï¼Œ">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2018-09-07T10:52:00.793Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="å¸¸ç”¨çš„ GCD">
<meta name="twitter:description" content="CGD çš„ç®€è¿°GCD å…¨ç§° Grand Central Dispatchã€‚ç®€å•æ¥è¯´å°±æ˜¯ Apple å¯¹äºä¼˜åŒ–åº”ç”¨ç¨‹åºä»¥åŠæ”¯æŒå¤šæ ¸å¤„ç†å™¨æ‰€å¼€å‘çš„å¤šæ ¸ç¼–ç¨‹çš„æœ€æ–°è§£å†³æ–¹æ¡ˆã€‚æœ¬æ–‡ä¸»è¦å¯¹äºå¼€å‘ä¸­å¸¸ç”¨çš„è¿›è¡Œç®€è¿°ï¼Œä¸ä¼šé’ˆå¯¹åº•å±‚è§£æï¼Œæƒ³ç ”ç©¶åº•å±‚è¯·çœ‹è¿™é‡Œã€‚ æœ¬æ–‡ç¤ºä¾‹å‡é‡‡ç”¨ Swift 4 å®ç°ã€‚Swift 3 ä»¥å‰åœ¨å¼€å‘ä¸­ä½¿ç”¨ GCD ä¸æ˜¯å¤ªå‹å¥½ â€” ç”±äºå®ƒçš„ç¼–ç¨‹é£æ ¼æ¥è¿‘ Cï¼Œä¸ Swift style å·®åˆ«å¾ˆå¤§ï¼Œ">






  <link rel="canonical" href="http://yoursite.com/2018/05/01/å…³äº GCD/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>å¸¸ç”¨çš„ GCD | Inception</title>
  









  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"> 

<div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Inception</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Stay Hungry Stay Foolish</p>
      
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        
          
  <li class="menu-item menu-item-home">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br />Home</a>
</li>

      
        
        
          
  <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />Archives</a>
</li>

      

      
    </ul>
  

  
    

  

  
</nav>


  



 </div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/01/å…³äº GCD/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="MorningStar">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Inception">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">å¸¸ç”¨çš„ GCD</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-01T13:20:14+08:00">2018-05-01</time>
            

            
            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="CGD-çš„ç®€è¿°"><a href="#CGD-çš„ç®€è¿°" class="headerlink" title="CGD çš„ç®€è¿°"></a>CGD çš„ç®€è¿°</h2><p>GCD å…¨ç§° <a href="https://en.wikipedia.org/wiki/Grand_Central_Dispatch" target="_blank" rel="noopener">Grand Central Dispatch</a>ã€‚<br>ç®€å•æ¥è¯´å°±æ˜¯ Apple å¯¹äºä¼˜åŒ–åº”ç”¨ç¨‹åºä»¥åŠæ”¯æŒå¤šæ ¸å¤„ç†å™¨æ‰€å¼€å‘çš„å¤šæ ¸ç¼–ç¨‹çš„æœ€æ–°è§£å†³æ–¹æ¡ˆã€‚æœ¬æ–‡ä¸»è¦å¯¹äºå¼€å‘ä¸­å¸¸ç”¨çš„è¿›è¡Œç®€è¿°ï¼Œä¸ä¼šé’ˆå¯¹åº•å±‚è§£æï¼Œæƒ³ç ”ç©¶åº•å±‚è¯·çœ‹<a href="https://apple.github.io/swift-corelibs-libdispatch/" target="_blank" rel="noopener">è¿™é‡Œ</a>ã€‚</p>
<p>æœ¬æ–‡ç¤ºä¾‹å‡é‡‡ç”¨ Swift 4 å®ç°ã€‚Swift 3 ä»¥å‰åœ¨å¼€å‘ä¸­ä½¿ç”¨ GCD ä¸æ˜¯å¤ªå‹å¥½ â€” ç”±äºå®ƒçš„ç¼–ç¨‹é£æ ¼æ¥è¿‘ Cï¼Œä¸ Swift style å·®åˆ«å¾ˆå¤§ï¼ŒAPI éš¾è®°éš¾ç”¨ï¼Œå³ä½¿åœ¨ Objective-C ä¸­ä½¿ç”¨ä¹Ÿä¸å¤ªæ–¹ä¾¿ã€‚è¿™ä¹Ÿæ˜¯å¾ˆå¤šå¼€å‘è€…éƒ½ä½¿ç”¨ NSOperationQueue è€Œé¿å… GCD çš„ä¸»è¦åŸå› ã€‚</p>
<p>Swift 3 ä¸­ Apple é‡‡ç”¨äº†å…¨æ–°çš„ Swift style é‡å†™äº† GCDï¼Œè¿™ä½¿ GCD åœ¨å¼€å‘ä¸­çš„ä½¿ç”¨ä¸ä¹‹å‰å®Œå…¨æˆªç„¶ä¸åŒï¼Œè½»æ¾ä¸Šæ‰‹ï¼Œå¥½è®°å¥½ç”¨ã€‚å¦åˆ™ï¼Œä¹Ÿä¸ä¼šæœ‰è¿™ç¯‡æ–‡ç« äº†ã€‚<br><a id="more"></a></p>
<h2 id="GCD-çš„æ ¸å¿ƒ"><a href="#GCD-çš„æ ¸å¿ƒ" class="headerlink" title="GCD çš„æ ¸å¿ƒ"></a>GCD çš„æ ¸å¿ƒ</h2><h3 id="ä»»åŠ¡åŠå…¶æ‰§è¡Œæ–¹å¼"><a href="#ä»»åŠ¡åŠå…¶æ‰§è¡Œæ–¹å¼" class="headerlink" title="ä»»åŠ¡åŠå…¶æ‰§è¡Œæ–¹å¼"></a>ä»»åŠ¡åŠå…¶æ‰§è¡Œæ–¹å¼</h3><p>ä»»åŠ¡å°±æ˜¯çº¿ç¨‹ä¸­è¦æ‰§è¡Œçš„ä»£ç ï¼Œå®ƒå¯ä»¥éšåŒé˜Ÿåˆ—çš„åˆ›å»ºä¸€èµ·è¢«åˆ›å»ºï¼Œç„¶åå°†è¿™ä¸ªä»»åŠ¡æ·»åŠ æŒ‡å®šçš„æ‰§è¡Œæ–¹å¼ï¼ˆ<strong><em>åŒæ­¥æ‰§è¡Œ</em></strong> å’Œ<strong><em>å¼‚æ­¥æ‰§è¡Œ</em></strong>ï¼‰ã€‚</p>
<p>æƒ³è±¡ä½¿ç”¨éŸ³ä¹æ’­æ”¾å™¨æ”¾æ­Œï¼Œæ­£åœ¨æ’­æ”¾çš„æ­Œå°±æ˜¯<strong><font color="#D13720">æ‰§è¡Œçš„ä»»åŠ¡</font></strong>ï¼ŒéŸ³ä¹æ’­æ”¾å™¨æ˜¯å…ˆåˆ›å»ºäº†æ’­æ”¾åˆ—è¡¨ç„¶åå°†ä½ é€‰çš„è¿™é¦–æ­Œæ·»åŠ åˆ°æ’­æ”¾åˆ—è¡¨ï¼ˆè¿™å°±ç±»ä¼¼äºä¸Šè¿°çš„<strong><font color="#D13720">ä»»åŠ¡éšç€é˜Ÿåˆ—çš„åˆ›å»ºä¸€èµ·åˆ›å»º</font></strong>ï¼‰ï¼Œæœ€åå¼€å§‹æ’­æ”¾ï¼Œä¹Ÿå°±æ˜¯æ‰§è¡Œä»»åŠ¡ã€‚</p>
<p>é‚£<strong><em>åŒæ­¥æ‰§è¡Œ</em></strong> å’Œ<strong><em>å¼‚æ­¥æ‰§è¡Œ</em></strong> å‘¢ï¼Ÿ<br>ä½ å…ˆæ·»åŠ æ­Œæ›² 1 åˆ°æ’­æ”¾åˆ—è¡¨ï¼Œç„¶åæ·»åŠ æ­Œæ›² 2 åˆ°æ’­æ”¾åˆ—è¡¨ã€‚æ­Œæ›² 1 æ­£åœ¨æ’­æ”¾æ—¶ï¼ŒåŒä¸€éŸ³ä¹æ’­æ”¾å™¨çš„æ’­æ”¾åˆ—è¡¨ä¸­çš„æ­Œæ›² 2 æ˜¯æ— æ³•æ’­æ”¾çš„ï¼Œï¼ˆå‡è®¾æ­¤æ—¶æ— æ³•æ‰“å¼€å¦ä¸€ä¸ªæ’­æ”¾å™¨ï¼Œè¿™å°±ç›¸å½“äºä¸å…·å¤‡å¼€å¯æ–°çº¿ç¨‹èƒ½åŠ›ï¼‰åªèƒ½æ‰‹åŠ¨åˆ‡æ¢æˆ–æ˜¯ç­‰å¾…æ­Œæ›² 1 æ’­æ”¾å®Œæˆåæ‰å¯ä»¥æ’­æ”¾æ­Œæ›² 2ï¼Œä¹Ÿå°±æ˜¯å¿…é¡»æ­Œæ›² 1 ç»“æŸï¼Œæ­Œæ›² 2 æ‰èƒ½è¿›è¡Œã€‚<br>è¿™å°±æ˜¯<strong><em>åŒæ­¥æ‰§è¡Œ</em></strong>ã€‚</p>
<p>æ­Œæ›² 1 æ­£åœ¨æ’­æ”¾æ—¶ï¼Œä½ æ‰“å¼€äº†å¦ä¸€ä¸ªæ’­æ”¾å™¨ï¼ˆå¼€å¯æ–°çº¿ç¨‹ï¼‰ï¼Œæ’­æ”¾æ­Œæ›² 2ï¼Œæ— éœ€ç­‰å¾…æ­Œæ›² 1ï¼ˆä»»åŠ¡ï¼‰ç»“æŸï¼‰ï¼Œè¿™æ—¶ä¸¤ä¸ªæ’­æ”¾å™¨ä¸€èµ·æ’­æ”¾æ­Œæ›²ï¼ŒåŒæ—¶æ’­æ”¾æ­Œæ›² 1 å’Œæ­Œæ›² 2ã€‚<br>è¿™å°±æ˜¯<strong><em>å¼‚æ­¥æ‰§è¡Œ</em></strong>ã€‚</p>
<p>ç»¼ä¸Šæ‰€è¿°ï¼ŒäºŒè€…ä¹‹é—´çš„åŒºåˆ«ï¼š</p>
<p><strong>åŒæ­¥æ‰§è¡Œï¼š</strong></p>
<ul>
<li>å¿…é¡»ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œç»“æŸæ‰èƒ½æ‰§è¡Œä¸‹ä¸€ä¸ªï¼Œæ¢å¥è¯è¯´ï¼Œä»»åŠ¡ 1 æ‰§è¡Œæ—¶ï¼Œä»»åŠ¡ 2 ä¼šä¸€ç›´ç­‰å¾…åˆ°ä»»åŠ¡ 1 æ‰§è¡Œå®Œæ¯•æ‰ä¼šç»§ç»­æ‰§è¡Œã€‚</li>
<li>ä¸å…·å¤‡å¼€å¯æ–°çº¿ç¨‹èƒ½åŠ›ã€‚</li>
</ul>
<p><strong>å¼‚æ­¥æ‰§è¡Œï¼š</strong></p>
<ul>
<li>ä¸‹ä¸€ä¸ªä»»åŠ¡æ— éœ€ä»»ä½•ç­‰å¾…ï¼Œå³ä½¿å½“å‰ä»»åŠ¡æ­£åœ¨æ‰§è¡Œï¼Œä¹Ÿå¯ä»¥ç»§ç»­æ‰§è¡Œä¸‹ä¸€äººä»»åŠ¡ã€‚</li>
<li>å…·å¤‡å¼€å¯æ–°çº¿ç¨‹èƒ½åŠ›ã€‚</li>
</ul>
<blockquote>
<p><strong>By the way</strong><br>å¼‚æ­¥æ‰§è¡Œè™½ç„¶å…·å¤‡å¼€å¯æ–°çº¿ç¨‹çš„èƒ½åŠ›ï¼Œä½†æ˜¯ï¼Œæ˜¯å¦å¯ä»¥å¼€å¯æ–°çº¿ç¨‹ä¸é˜Ÿåˆ—ç±»å‹æœ‰å…³ã€‚</p>
</blockquote>
<h3 id="é˜Ÿåˆ—"><a href="#é˜Ÿåˆ—" class="headerlink" title="é˜Ÿåˆ—"></a>é˜Ÿåˆ—</h3><p>Dispatch Queueã€‚è¿˜æ˜¯åˆšæ‰çš„ä¾‹å­ï¼Œå…ˆåˆ°æ·»åŠ åˆ°æ’­æ”¾åˆ—è¡¨çš„å…ˆæ”¾ï¼Œåæ·»åŠ çš„åæ”¾ï¼ˆFIFOï¼‰ã€‚<strong><font color="#D13720">é˜Ÿåˆ—</font></strong>å°±æ˜¯æŒ‡ç±»ä¼¼äºæ’­æ”¾åˆ—è¡¨è¿™ç§<strong><font color="#D13720">æ‰§è¡Œä»»åŠ¡çš„é˜Ÿåˆ—</font></strong>ï¼Œåˆ—è¡¨ä¸­è¦æ’­æ”¾çš„éŸ³ä¹å°±æ˜¯è¦æ‰§è¡Œçš„<strong><font color="#D13720">ä»»åŠ¡</font></strong>ã€‚</p>
<p>é˜Ÿåˆ—æ˜¯ä¸€ç§ç‰¹æ®Šçš„çº¿æ€§è¡¨ï¼Œé‡‡ç”¨ FIFOï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰çš„åŸåˆ™ï¼Œé˜Ÿåˆ—ä¸Šçš„ä»»åŠ¡ä¹Ÿæ˜¯éµå¾ª FIFO æ¨¡å¼çš„ï¼Œç±»ä¼¼äºæ ˆï¼ˆstackï¼‰é‚£æ ·ã€‚ä¸€æ—¦åˆ›å»ºå®Œæˆç³»ç»Ÿç›´æ¥æ¥ç®¡ï¼ŒGCD è‡ªå·±æœ‰çº¿ç¨‹ç®¡ç†æ± ï¼Œæ— è®ºå¤šå°‘é˜Ÿåˆ—ï¼Œå®ƒä»¬éƒ½ä¼šè‡ªåŠ¨è¢«ç³»ç»Ÿæ­£ç¡®ç®¡ç†ã€‚æ¢å¥è¯è¯´ï¼Œæˆ‘ä»¬åªéœ€è¦æå¥½ä»»åŠ¡ã€æ‰§è¡Œæ–¹å¼ã€é˜Ÿåˆ—ï¼Œæ— éœ€å’Œçº¿ç¨‹ç›´æ¥æ‰“äº¤é“ã€‚</p>
<p>å†æ¥æƒ³è±¡ä¸€ä¸‹éŸ³ä¹æ’­æ”¾å™¨æ”¾æ­Œï¼Œä½ åªéœ€è¦æ‰¾åˆ°ä½ æƒ³è¦æ’­æ”¾çš„æ­Œæ›²ï¼Œç„¶åæ·»åŠ åˆ°æ’­æ”¾åˆ—è¡¨ï¼Œä½ æ— é¡»ç®¡ç†æ’­æ”¾å™¨ä»€ä¹ˆæ—¶å€™åˆ‡æ¢ä¸‹ä¸€æ›²ã€‚</p>
<p>ä¸€ä¸ªé˜Ÿåˆ—æ˜¯å¯ä»¥<strong>ä¸²è¡Œ</strong>æˆ–è€…<strong>å¹¶è¡Œ</strong>çš„ã€‚<br>ä¸²è¡Œé˜Ÿåˆ—å°±åƒä¸€ä¸ªæ’­æ”¾å™¨æ’­æ”¾ï¼Œå¹¶è¡Œé˜Ÿåˆ—å°±åƒå¤šä¸ªæ’­æ”¾å™¨åŒæ—¶æ’­æ”¾ã€‚</p>
<p>åœ¨<strong>ä¸²è¡Œé˜Ÿåˆ—ï¼ˆSerial Dispatch Queueï¼‰</strong>ä¸­ï¼Œä¸€ä¸ªä»»åŠ¡åªæœ‰åœ¨å‰ä¸€ä¸ªä»»åŠ¡å®Œæˆåæ‰èƒ½æ‰§è¡Œï¼ˆé™¤éå®ƒæ˜¯ç¬¬ä¸€ä¸ªä»»åŠ¡ï¼‰ï¼Œå¹¶ä¸”åªèƒ½åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­æ‰§è¡Œä»»åŠ¡ï¼›<br>è€Œåœ¨<strong>å¹¶è¡Œé˜Ÿåˆ—ï¼ˆConcurrent Dispatch Queueï¼‰</strong>ä¸­ï¼Œæ‰€æœ‰çš„ä»»åŠ¡éƒ½å¯ä»¥åŒæ—¶ï¼ˆå¹¶å‘ï¼‰æ‰§è¡Œã€‚</p>
<blockquote>
<p><strong>By the way</strong></p>
<ul>
<li>FIFO = First In First Out</li>
<li>å¹¶è¡Œé˜Ÿåˆ—çš„å¹¶å‘åŠŸèƒ½åªæœ‰åœ¨å¼‚æ­¥ï¼ˆasyncï¼‰å‡½æ•°ä¸‹æœ‰æ•ˆã€‚</li>
<li>ä¸ºä¸»é˜Ÿåˆ—æ·»åŠ ä»»åŠ¡æ—¶ï¼Œå¿…é¡»è°¨æ…ã€‚å› ä¸ºä¸»é˜Ÿåˆ—å®æ—¶äº¤äº’ç”¨æˆ·å±‚é¢ï¼Œæ‰€æœ‰å…³äº UI çš„æ›´æ–°å¿…é¡»åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œï¼Œå¦‚æœåœ¨å…¶ä»–çº¿ç¨‹å°è¯•æ›´æ–°å¸¸å¸¸ä¼šæœ‰æ„æƒ³ä¸åˆ°çš„é”™è¯¯ã€‚</li>
<li>å¯¹äºå¼€å‘è€…æ¥è¯´ï¼Œé™¤äº†åœ¨ä¸»çº¿ç¨‹æ›´æ–° UI çš„ä»»åŠ¡ï¼Œåœ¨å“ªæ¡çº¿ç¨‹æ‰§è¡Œå…¶ä»–ä»»åŠ¡æ˜¯æœªçŸ¥çš„ã€‚</li>
</ul>
</blockquote>
<h2 id="é˜Ÿåˆ—ä»¥åŠæ‰§è¡Œæ–¹å¼çš„ç»„åˆä½¿ç”¨"><a href="#é˜Ÿåˆ—ä»¥åŠæ‰§è¡Œæ–¹å¼çš„ç»„åˆä½¿ç”¨" class="headerlink" title="é˜Ÿåˆ—ä»¥åŠæ‰§è¡Œæ–¹å¼çš„ç»„åˆä½¿ç”¨"></a>é˜Ÿåˆ—ä»¥åŠæ‰§è¡Œæ–¹å¼çš„ç»„åˆä½¿ç”¨</h2><h3 id="Dispatch-Queue"><a href="#Dispatch-Queue" class="headerlink" title="Dispatch Queue"></a>Dispatch Queue</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> queue = <span class="type">DispatchQueue</span>(label: <span class="string">"com.MorningStar.queue"</span>)</span><br></pre></td></tr></table></figure>
<p>è¿™æ˜¯åˆ›å»º Dispatch Queue çš„æœ€ç®€ä¾¿æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æœ‰ä¸ªå‚æ•°<code>label</code>ï¼Œè¯¥å‚æ•°ç”¨äºä¸ºé˜Ÿåˆ—åˆ›å»ºä¸€ä¸ªæ ‡è¯†ç¬¦ã€‚</p>
<p>è¯ºï¼Œç°åœ¨æœ‰äº†é˜Ÿåˆ—ï¼Œå°±æ¥æ‰§è¡Œå§ã€‚</p>
<blockquote>
<p><strong>Note</strong></p>
<ul>
<li>ç®€ä¾¿æ–¹æ³•åˆ›å»ºçš„æ˜¯ä¸²è¡Œé˜Ÿåˆ—ã€‚</li>
<li>ä¸åŒçš„æ°´æœä»£è¡¨ä¸åŒçš„é˜Ÿåˆ—ï¼Œä»¥ä¾¿åœ¨ console ä¸Šæ¸…æ¥šçš„è¯†åˆ«æ‰“å°å†…å®¹ã€‚</li>
</ul>
</blockquote>
<h3 id="ä¸²è¡Œé˜Ÿåˆ—ï¼ˆSerial-Dispatch-Queueï¼‰"><a href="#ä¸²è¡Œé˜Ÿåˆ—ï¼ˆSerial-Dispatch-Queueï¼‰" class="headerlink" title="ä¸²è¡Œé˜Ÿåˆ—ï¼ˆSerial Dispatch Queueï¼‰"></a>ä¸²è¡Œé˜Ÿåˆ—ï¼ˆSerial Dispatch Queueï¼‰</h3><h4 id="ä¸²è¡Œé˜Ÿåˆ—åŒæ­¥æ‰§è¡Œ"><a href="#ä¸²è¡Œé˜Ÿåˆ—åŒæ­¥æ‰§è¡Œ" class="headerlink" title="ä¸²è¡Œé˜Ÿåˆ—åŒæ­¥æ‰§è¡Œ"></a>ä¸²è¡Œé˜Ÿåˆ—åŒæ­¥æ‰§è¡Œ</h4><p>å…ˆ<code>sync</code>åŒæ­¥æ‰§è¡Œ</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">queue.sync &#123;</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">1</span>..&lt;<span class="number">5</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"ğŸ"</span>, i)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">queue.sync &#123;</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">5</span>..&lt;<span class="number">10</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"ğŸ"</span>, i)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">Prints</span>ï¼š</span><br><span class="line">ğŸ <span class="number">1</span></span><br><span class="line">ğŸ <span class="number">2</span></span><br><span class="line">ğŸ <span class="number">3</span></span><br><span class="line">ğŸ <span class="number">4</span></span><br><span class="line">ğŸ <span class="number">5</span></span><br><span class="line">ğŸ <span class="number">6</span></span><br><span class="line">ğŸ <span class="number">7</span></span><br><span class="line">ğŸ <span class="number">8</span></span><br><span class="line">ğŸ <span class="number">9</span></span><br></pre></td></tr></table></figure>
<p>ä»£ç ä¸æ‰“å°ç»“æœæ¸…æ™°çš„ååº”äº†ï¼Œè‡ªå®šä¹‰é˜Ÿåˆ—åœ¨ä¸»çº¿ç¨‹ä¸ŠæŒ‰é¡ºåºæ‰§è¡Œã€‚</p>
<blockquote>
<p><strong>ä¸²è¡ŒåŒæ­¥</strong><br>ä»»åŠ¡ä¼šåœ¨ä¸€æ¡çº¿ç¨‹ä¸Šé¡ºåºä¾æ¬¡æ‰§è¡Œï¼Œå¹¶ä¸”ä¸å…·å¤‡å¼€å¯å­çº¿ç¨‹èƒ½åŠ›ã€‚</p>
</blockquote>
<h4 id="ä¸²è¡Œé˜Ÿåˆ—å¼‚æ­¥æ‰§è¡Œ"><a href="#ä¸²è¡Œé˜Ÿåˆ—å¼‚æ­¥æ‰§è¡Œ" class="headerlink" title="ä¸²è¡Œé˜Ÿåˆ—å¼‚æ­¥æ‰§è¡Œ"></a>ä¸²è¡Œé˜Ÿåˆ—å¼‚æ­¥æ‰§è¡Œ</h4><p>æ¥ä¸‹æ¥ä½¿ç”¨å¼‚æ­¥<code>async</code>ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ<br>ä»£ç å†™æˆè¿™æ ·ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> queue1 = <span class="type">DispatchQueue</span>(label: <span class="string">"com.MorningStar.queue1"</span>)</span><br><span class="line"><span class="keyword">let</span> queue2 = <span class="type">DispatchQueue</span>(label: <span class="string">"com.MorningStar.queue2"</span>)</span><br><span class="line"></span><br><span class="line">queue1.async &#123;</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">1</span>..&lt;<span class="number">5</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"ğŸ"</span>, i)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">queue1.async &#123;</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">5</span>..&lt;<span class="number">10</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"ğŸ"</span>, i)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">queue2.async &#123;</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">10</span>..&lt;<span class="number">15</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"ğŸ"</span>, i)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">Prints</span>ï¼š</span><br><span class="line">ğŸ <span class="number">1</span></span><br><span class="line">ğŸ <span class="number">2</span></span><br><span class="line">ğŸ <span class="number">3</span></span><br><span class="line">ğŸ <span class="number">4</span></span><br><span class="line">ğŸ <span class="number">10</span></span><br><span class="line">ğŸ <span class="number">11</span></span><br><span class="line">ğŸ <span class="number">12</span></span><br><span class="line">ğŸ <span class="number">13</span></span><br><span class="line">ğŸ <span class="number">14</span></span><br><span class="line">ğŸ <span class="number">5</span></span><br><span class="line">ğŸ <span class="number">6</span></span><br><span class="line">ğŸ <span class="number">7</span></span><br><span class="line">ğŸ <span class="number">8</span></span><br><span class="line">ğŸ <span class="number">9</span></span><br></pre></td></tr></table></figure>
<p>è¿™æ¬¡çš„æ‰“å°ç»“æœä¼¼ä¹æœ‰ç‚¹æ„æ€ï¼Œå¦‚æœä½ å¤šæ‰§è¡Œå‡ æ¬¡æˆ–è®¸ä¼šå‘ç°æ¯æ¬¡è¾“å‡ºçš„ç»“æœå¯èƒ½éƒ½ä¸ä¸€æ ·ã€‚æ— è®º queue 2 ä¸­çš„ä»»åŠ¡ä½•æ—¶æ‰§è¡Œï¼ˆæ‰“å°ï¼‰ï¼Œè¿™ä¸¤ä¸ªé˜Ÿåˆ—ä¸­ä»»åŠ¡çš„æ‰§è¡Œï¼ˆæ‰“å°ï¼‰é¡ºåºæ˜¯ä¸å˜çš„, ğŸ çš„æ‰“å°ç»“æœæ°¸è¿œæ˜¯ 1-9 çš„é¡ºåºæ’åˆ—ï¼ŒğŸæ°¸è¿œæ˜¯ 10-14ï¼Œè¿™ä¹Ÿå°±è¯æ˜äº†ä¹‹å‰æåˆ°çš„è§‚ç‚¹ï¼š</p>
<blockquote>
<p><strong>ä¸²è¡Œå¼‚æ­¥</strong></p>
<ul>
<li>åŒä¸€ä¸²è¡Œé˜Ÿåˆ—çš„ä»»åŠ¡å³ä½¿æ˜¯å¼‚æ­¥æ‰§è¡Œä¹Ÿåªåœ¨åŒä¸€çº¿ç¨‹ä¸ŠæŒ‰é¡ºåºä¾æ¬¡æ‰§è¡Œã€‚</li>
<li>ä¸åŒä¸²è¡Œé˜Ÿåˆ—å¼‚æ­¥æ‰§è¡Œï¼Œæœ‰å‡ æ¡ä¸²è¡Œé˜Ÿåˆ—å¼‚æ­¥æ‰§è¡Œï¼Œå°±ä¼šæœ‰å‡ æ¡çº¿ç¨‹ã€‚ä¹Ÿå°±æ˜¯è¯´ä¸²è¡Œé˜Ÿåˆ—åªä¼šå¼€å¯ä¸€æ¡æ–°çº¿ç¨‹æˆ–è€…ä¸å¼€å¯æ–°çº¿ç¨‹ï¼Œåœ¨å½“å‰çº¿æ‰§è¡Œã€‚ä½†æ˜¯åŒä¸€ä¸²è¡Œé˜Ÿåˆ—ä¸Šçš„ä»»åŠ¡ï¼ˆä¸è®ºä½•ç§æ‰§è¡Œæ–¹å¼ï¼‰åªä¼šåœ¨è´Ÿè´£è¯¥é˜Ÿåˆ—çš„ä¸€æ¡çº¿ç¨‹é¡ºåºæ‰§è¡Œã€‚</li>
<li>é˜Ÿåˆ—æ‰§è¡Œå®Œæ¯•é¡ºåºåªå’Œï¼ˆæ¥ä¸‹æ¥è¯´åˆ°çš„ï¼‰Qosï¼ˆä¼˜å…ˆçº§ï¼‰æœ‰å…³ã€‚</li>
</ul>
</blockquote>
<p>å¦‚æœæœ‰å…´è¶£ï¼Œå¯åœ¨ä»£ç ä¸­å¤šæ·»åŠ å‡ æ¡ä¸²è¡Œé˜Ÿåˆ—ï¼Œå¹¶åœ¨å¼‚æ­¥æ‰§è¡Œä»»åŠ¡çš„è¾“å‡ºæ—¶æ‰“å°çº¿ç¨‹è¯•è¯•ç»“æœã€‚</p>
<h3 id="DispatchQoS"><a href="#DispatchQoS" class="headerlink" title="DispatchQoS"></a>DispatchQoS</h3><p>æœ‰äº›æ—¶å€™æˆ‘ä»¬ä½¿ç”¨ GCD æ‰§è¡Œä»»åŠ¡æ—¶éœ€è¦å¯¹ä»»åŠ¡æœ‰ä¸ªå…ˆåæ’åºï¼Œå“ªäº›å…ˆæ‰§è¡Œï¼Œå“ªäº›åæ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯ä»»åŠ¡çš„ä¼˜å…ˆçº§ã€‚</p>
<p>å›æƒ³ä¸€ä¸‹ï¼Œæˆ–è®¸ä½ ä¼šæƒ³èµ·ä¹‹å‰ç®€ä¾¿åˆ›å»º <code>DispatchQueue</code> æ—¶ Xcode æç¤ºäº†ä¸€ä¸ªæ„é€ æ–¹æ³•ï¼š<br><code>DispatchQueue(label:qos:attributes:autoreleaseFrequency:target:)</code><br>è¯¥æ–¹æ³•çš„ç¬¬äºŒä¸ªæ„é€ å‚æ•°åå°±æ˜¯ qosï¼ˆQuality Of Serviceï¼‰ï¼Œå…¶å‚æ•°ç±»å‹æ˜¯<code>DispatchQoS</code>ã€‚ä¼šç”¨äºæŒ‡å®šä»»åŠ¡é‡è¦ç¨‹åº¦ä»¥åŠä¼˜å…ˆçº§çš„ä¿¡æ¯ã€‚<br>Xcode çš„å¼€å‘è€…æ–‡æ¡£å¯¹äº <code>DispatchQoS</code>æœ‰å¦‚ä¸‹è§£é‡Šï¼š</p>
<blockquote>
<p>Higher priority work is performed more quickly and with more resources than lower priority work, it typically requires more energy than lower priority work. Accurately specifying appropriate QoS classes for the work your app performs ensures that your app is responsive and energy efficient.</p>
</blockquote>
<p>ç¿»ç¿»ä»£ç ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">struct</span> <span class="title">DispatchQoS</span> : <span class="title">Equatable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">let</span> qosClass: <span class="type">DispatchQoS</span>.<span class="type">QoSClass</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">enum</span> <span class="title">QoSClass</span> </span>&#123;</span><br><span class="line">        <span class="keyword">case</span> unspecified</span><br><span class="line"></span><br><span class="line">        <span class="meta">@available</span>(<span class="type">OSX</span> <span class="number">10.10</span>, iOS <span class="number">8.0</span>, *)</span><br><span class="line">        <span class="keyword">case</span> background</span><br><span class="line"></span><br><span class="line">        <span class="meta">@available</span>(<span class="type">OSX</span> <span class="number">10.10</span>, iOS <span class="number">8.0</span>, *)</span><br><span class="line">        <span class="keyword">case</span> utility</span><br><span class="line"></span><br><span class="line">        <span class="meta">@available</span>(<span class="type">OSX</span> <span class="number">10.10</span>, iOS <span class="number">8.0</span>, *)</span><br><span class="line">        <span class="keyword">case</span> `<span class="keyword">default</span>`</span><br><span class="line"></span><br><span class="line">        <span class="meta">@available</span>(<span class="type">OSX</span> <span class="number">10.10</span>, iOS <span class="number">8.0</span>, *)</span><br><span class="line">        <span class="keyword">case</span> userInitiated</span><br><span class="line"></span><br><span class="line">        <span class="meta">@available</span>(<span class="type">OSX</span> <span class="number">10.10</span>, iOS <span class="number">8.0</span>, *)</span><br><span class="line">        <span class="keyword">case</span> userInteractive</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¯ä»¥æ ¹æ®éœ€æ±‚ä½¿ç”¨åˆé€‚çš„ QoS å€¼æ¥åˆå§‹åŒ–é˜Ÿåˆ—ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®š QoSï¼Œåˆ™é˜Ÿåˆ—ä¼šä½¿ç”¨é»˜è®¤ä¼˜å…ˆçº§è¿›è¡Œåˆå§‹åŒ–ã€‚ä¸Šé¢çš„æšä¸¾ <code>QoSClass</code> çš„ case æ˜¯ä»ä½åˆ°é«˜ä¼˜å…ˆçº§çš„æ’åºã€‚</p>
<p>ç°åœ¨æŠŠä»£ç æ”¹æˆè¿™æ ·ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> queue1 = <span class="type">DispatchQueue</span>(label: <span class="string">"com.MorningStar.queue1"</span>, qos: .userInitiated)</span><br><span class="line"><span class="keyword">let</span> queue2 = <span class="type">DispatchQueue</span>(label: <span class="string">"com.MorningStar.queue2"</span>, qos: .utility)</span><br><span class="line"></span><br><span class="line">queue1.async &#123;</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">1</span>..&lt;<span class="number">5</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"ğŸ"</span>, i)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">queue2.async &#123;</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">10</span>..&lt;<span class="number">15</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"ğŸ"</span>, i)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">queue1.async &#123;</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">5</span>..&lt;<span class="number">10</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"ğŸ"</span>, i)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">Prints</span>ï¼š</span><br><span class="line">ğŸ <span class="number">1</span>  ğŸ <span class="number">10</span></span><br><span class="line">ğŸ <span class="number">2</span>  ğŸ <span class="number">1</span></span><br><span class="line">ğŸ <span class="number">3</span>  ğŸ <span class="number">2</span></span><br><span class="line">ğŸ <span class="number">4</span>  ğŸ <span class="number">3</span></span><br><span class="line">ğŸ <span class="number">5</span>  ğŸ <span class="number">4</span></span><br><span class="line">ğŸ <span class="number">6</span>  ğŸ <span class="number">5</span></span><br><span class="line">ğŸ <span class="number">7</span>  ğŸ <span class="number">6</span></span><br><span class="line">ğŸ <span class="number">8</span>  ğŸ <span class="number">7</span></span><br><span class="line">ğŸ <span class="number">9</span>  ğŸ <span class="number">8</span></span><br><span class="line">ğŸ <span class="number">10</span> ğŸ <span class="number">9</span></span><br><span class="line">ğŸ <span class="number">11</span> ğŸ <span class="number">11</span></span><br><span class="line">ğŸ <span class="number">12</span> ğŸ <span class="number">12</span></span><br><span class="line">ğŸ <span class="number">13</span> ğŸ <span class="number">13</span></span><br><span class="line">ğŸ <span class="number">14</span> ğŸ <span class="number">14</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢ä»£ç æ¯æ¬¡æ‰§è¡Œçš„ç»“æœå¯èƒ½ä¸åŒï¼Œæˆ‘åªæå–äº†ä¸¤ç§ç»“æœï¼Œä½†æ˜¯å¯ä»¥æ¸…æ™°çš„çœ‹å‡º queue 1 æ¯” queue 2 æ‰§è¡Œä»»åŠ¡è¦å¿«ï¼Œå› ä¸º queue 1 ä¼˜å…ˆçº§é«˜ï¼Œå³ä½¿ queue 2 è·å¾—äº†æ‰§è¡Œçš„æœºä¼šï¼Œä½†æ˜¯ç³»ç»Ÿè¿˜æ˜¯ä¼šå…ˆæŠŠèµ„æºä¼˜å…ˆä¾›ç»™ queue 1ï¼Œqueue 1 ç»“æŸåæ‰ä¼šå…³æ³¨ queue 2ã€‚</p>
<blockquote>
<p>Note</p>
<ul>
<li>ä¸»çº¿ç¨‹æ‰§è¡Œçš„ä»»åŠ¡æ°¸è¿œæ˜¯æœ€é«˜ä¼˜å…ˆçº§ã€‚</li>
<li>ä¼˜å…ˆçº§ä»£è¡¨æ‰§è¡Œå®Œæˆçš„é€Ÿåº¦ã€‚</li>
<li>å½“ç„¶å¦‚æœåˆ›å»ºæ—¶å¹¶ä¸æŒ‡å®šä¼˜å…ˆçº§å‚æ•°(Qos)ï¼Œä¹Ÿä¸ä¼šæœ‰ä»»ä½•é—®é¢˜ï¼Œå®ƒä¼šè¢«è®¾ä¸ºé»˜è®¤çº§åˆ«ã€‚</li>
</ul>
</blockquote>
<h3 id="å¹¶è¡Œé˜Ÿåˆ—ï¼ˆConcurrent-Dispatch-Queueï¼‰"><a href="#å¹¶è¡Œé˜Ÿåˆ—ï¼ˆConcurrent-Dispatch-Queueï¼‰" class="headerlink" title="å¹¶è¡Œé˜Ÿåˆ—ï¼ˆConcurrent Dispatch Queueï¼‰"></a>å¹¶è¡Œé˜Ÿåˆ—ï¼ˆConcurrent Dispatch Queueï¼‰</h3><p>å¦‚æœæˆ‘ä»¬å‘ä¸²è¡Œé˜Ÿåˆ—åŠ å…¥ N ä¸ªä»»åŠ¡ï¼Œå°±åƒåœ¨ä¸€ä¸ªéŸ³ä¹æ’­æ”¾å™¨çš„æ’­æ”¾åˆ—è¡¨ä¸­æ·»åŠ äº† N é¦–æ­Œæ›²ï¼Œå®ƒä¼šæŒ‰ç…§é¡ºåºä¾æ¬¡æ’­æ”¾ã€‚</p>
<p>ä½†å¦‚æœä½ æƒ³è®©å¤šä¸ªä»»åŠ¡åŒæ—¶æ‰§è¡Œï¼Œé‚£ä¹ˆï¼Œ<strong>å¹¶è¡Œé˜Ÿåˆ—</strong>ï¼Œäº†è§£ä¸€ä¸‹ï¼Ÿï¼</p>
<h4 id="å¹¶è¡Œé˜Ÿåˆ—å¼‚æ­¥æ‰§è¡Œ"><a href="#å¹¶è¡Œé˜Ÿåˆ—å¼‚æ­¥æ‰§è¡Œ" class="headerlink" title="å¹¶è¡Œé˜Ÿåˆ—å¼‚æ­¥æ‰§è¡Œ"></a>å¹¶è¡Œé˜Ÿåˆ—å¼‚æ­¥æ‰§è¡Œ</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> concurrentQueue = <span class="type">DispatchQueue</span>(label: <span class="string">"concurrent"</span>, qos: .utility, attributes: .concurrent)</span><br><span class="line"></span><br><span class="line">concurrentQueue.async &#123;</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">1</span>..&lt;<span class="number">5</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"ğŸ"</span>, i, <span class="type">Thread</span>.current)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">concurrentQueue.async &#123;</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">5</span>..&lt;<span class="number">10</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"ğŸŠ"</span>, i, <span class="type">Thread</span>.current)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">concurrentQueue.async &#123;</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">10</span>..&lt;<span class="number">15</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"ğŸ"</span>, i, <span class="type">Thread</span>.current)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">Prints</span>:</span><br><span class="line">ğŸ <span class="number">1</span> &lt;<span class="type">NSThread</span>: <span class="number">0x600001fe69c0</span>&gt;&#123;number = <span class="number">4</span>, name = (null)&#125;</span><br><span class="line">ğŸ <span class="number">2</span> &lt;<span class="type">NSThread</span>: <span class="number">0x600001fe69c0</span>&gt;&#123;number = <span class="number">4</span>, name = (null)&#125;</span><br><span class="line">ğŸ <span class="number">10</span> &lt;<span class="type">NSThread</span>: <span class="number">0x600001fc4b80</span>&gt;&#123;number = <span class="number">5</span>, name = (null)&#125;</span><br><span class="line">ğŸŠ <span class="number">5</span> &lt;<span class="type">NSThread</span>: <span class="number">0x600001fcef00</span>&gt;&#123;number = <span class="number">3</span>, name = (null)&#125;</span><br><span class="line">ğŸŠ <span class="number">6</span> &lt;<span class="type">NSThread</span>: <span class="number">0x600001fcef00</span>&gt;&#123;number = <span class="number">3</span>, name = (null)&#125;</span><br><span class="line">ğŸŠ <span class="number">7</span> &lt;<span class="type">NSThread</span>: <span class="number">0x600001fcef00</span>&gt;&#123;number = <span class="number">3</span>, name = (null)&#125;</span><br><span class="line">ğŸŠ <span class="number">8</span> &lt;<span class="type">NSThread</span>: <span class="number">0x600001fcef00</span>&gt;&#123;number = <span class="number">3</span>, name = (null)&#125;</span><br><span class="line">ğŸŠ <span class="number">9</span> &lt;<span class="type">NSThread</span>: <span class="number">0x600001fcef00</span>&gt;&#123;number = <span class="number">3</span>, name = (null)&#125;</span><br><span class="line">ğŸ <span class="number">3</span> &lt;<span class="type">NSThread</span>: <span class="number">0x600001fe69c0</span>&gt;&#123;number = <span class="number">4</span>, name = (null)&#125;</span><br><span class="line">ğŸ <span class="number">4</span> &lt;<span class="type">NSThread</span>: <span class="number">0x600001fe69c0</span>&gt;&#123;number = <span class="number">4</span>, name = (null)&#125;</span><br><span class="line">ğŸ <span class="number">11</span> &lt;<span class="type">NSThread</span>: <span class="number">0x600001fc4b80</span>&gt;&#123;number = <span class="number">5</span>, name = (null)&#125;</span><br><span class="line">ğŸ <span class="number">12</span> &lt;<span class="type">NSThread</span>: <span class="number">0x600001fc4b80</span>&gt;&#123;number = <span class="number">5</span>, name = (null)&#125;</span><br><span class="line">ğŸ <span class="number">13</span> &lt;<span class="type">NSThread</span>: <span class="number">0x600001fc4b80</span>&gt;&#123;number = <span class="number">5</span>, name = (null)&#125;</span><br><span class="line">ğŸ <span class="number">14</span> &lt;<span class="type">NSThread</span>: <span class="number">0x600001fc4b80</span>&gt;&#123;number = <span class="number">5</span>, name = (null)&#125;</span><br></pre></td></tr></table></figure>
<p>çœ‹å“¦ï¼Œåˆ›å»º <code>DispatchQueue</code> çš„æ„é€ æ–¹æ³•å¤šä¸ªä¸€ä¸ªæ„é€ å‚æ•° <code>attributes</code>ï¼Œè¯¥å‚æ•°è¢«æŒ‡å®šä¸º <code>concurrent</code>ï¼Œä¹Ÿå°±æ˜¯<code>concurrentQueue</code>è¢«è®¾ç½®ä¸ºå¹¶è¡Œé˜Ÿåˆ—ï¼Œè¯¥é˜Ÿåˆ—ä¸Šçš„æ‰€æœ‰ä»»åŠ¡ä¼šè¢«åŒæ—¶æ‰§è¡Œï¼Œå¦åˆ™å°±æ˜¯ä¸²è¡Œé˜Ÿåˆ—ã€‚</p>
<p>æ‰“å°ç»“æœæ¸…æ™°çš„æ˜¾ç¤ºæ¯ç§æ°´æœæ‰€åœ¨çš„çº¿ç¨‹éƒ½æ˜¯ä¸åŒçš„ï¼Œè¿™è¯´æ˜<code>concurrentQueue</code>é˜Ÿåˆ—å®é™…åœ¨ä¸‰ä¸ªçº¿ç¨‹ä¸Šæ‰§è¡Œäº†ä»»åŠ¡ã€‚</p>
<blockquote>
<p><strong>å¹¶è¡Œå¼‚æ­¥</strong></p>
<ul>
<li>é™¤äº†å½“å‰çº¿ç¨‹ï¼ˆä¸»çº¿ç¨‹ï¼‰ï¼Œç³»ç»Ÿåˆå¼€å¯äº†3ä¸ªçº¿ç¨‹ï¼Œå¹¶ä¸”ä»»åŠ¡æ˜¯äº¤æ›¿/åŒæ—¶æ‰§è¡Œçš„ã€‚å¼‚æ­¥æ‰§è¡Œå…·å¤‡å¼€å¯æ–°çº¿ç¨‹çš„èƒ½åŠ›ä¸”å¹¶å‘é˜Ÿåˆ—å¯ä»¥å¼€å¯å¤šä¸ªçº¿ç¨‹ï¼ŒåŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡ã€‚</li>
<li>å¹¶è¡Œé˜Ÿåˆ—çš„å¹¶å‘åŠŸèƒ½åªæœ‰åœ¨å¼‚æ­¥ï¼ˆasyncï¼‰å‡½æ•°ä¸‹æœ‰æ•ˆã€‚</li>
</ul>
</blockquote>
<h4 id="å¹¶è¡Œé˜Ÿåˆ—åŒæ­¥æ‰§è¡Œ"><a href="#å¹¶è¡Œé˜Ÿåˆ—åŒæ­¥æ‰§è¡Œ" class="headerlink" title="å¹¶è¡Œé˜Ÿåˆ—åŒæ­¥æ‰§è¡Œ"></a>å¹¶è¡Œé˜Ÿåˆ—åŒæ­¥æ‰§è¡Œ</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> concurrentQueue = <span class="type">DispatchQueue</span>(label: <span class="string">"concurrent"</span>, attributes: .concurrent)</span><br><span class="line"></span><br><span class="line">concurrentQueue.sync &#123;</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">1</span>..&lt;<span class="number">5</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"ğŸ"</span>, i, <span class="type">Thread</span>.current)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">concurrentQueue.sync &#123;</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">5</span>..&lt;<span class="number">10</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"ğŸŠ"</span>, i, <span class="type">Thread</span>.current)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">concurrentQueue.sync &#123;</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">10</span>..&lt;<span class="number">15</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"ğŸ"</span>, i, <span class="type">Thread</span>.current)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">Prints</span>:</span><br><span class="line">ğŸ <span class="number">1</span> &lt;<span class="type">NSThread</span>: <span class="number">0x60000046bd80</span>&gt;&#123;number = <span class="number">1</span>, name = main&#125;</span><br><span class="line">ğŸ <span class="number">2</span> &lt;<span class="type">NSThread</span>: <span class="number">0x60000046bd80</span>&gt;&#123;number = <span class="number">1</span>, name = main&#125;</span><br><span class="line">ğŸ <span class="number">3</span> &lt;<span class="type">NSThread</span>: <span class="number">0x60000046bd80</span>&gt;&#123;number = <span class="number">1</span>, name = main&#125;</span><br><span class="line">ğŸ <span class="number">4</span> &lt;<span class="type">NSThread</span>: <span class="number">0x60000046bd80</span>&gt;&#123;number = <span class="number">1</span>, name = main&#125;</span><br><span class="line">ğŸŠ <span class="number">5</span> &lt;<span class="type">NSThread</span>: <span class="number">0x60000046bd80</span>&gt;&#123;number = <span class="number">1</span>, name = main&#125;</span><br><span class="line">ğŸŠ <span class="number">6</span> &lt;<span class="type">NSThread</span>: <span class="number">0x60000046bd80</span>&gt;&#123;number = <span class="number">1</span>, name = main&#125;</span><br><span class="line">ğŸŠ <span class="number">7</span> &lt;<span class="type">NSThread</span>: <span class="number">0x60000046bd80</span>&gt;&#123;number = <span class="number">1</span>, name = main&#125;</span><br><span class="line">ğŸŠ <span class="number">8</span> &lt;<span class="type">NSThread</span>: <span class="number">0x60000046bd80</span>&gt;&#123;number = <span class="number">1</span>, name = main&#125;</span><br><span class="line">ğŸŠ <span class="number">9</span> &lt;<span class="type">NSThread</span>: <span class="number">0x60000046bd80</span>&gt;&#123;number = <span class="number">1</span>, name = main&#125;</span><br><span class="line">ğŸ <span class="number">10</span> &lt;<span class="type">NSThread</span>: <span class="number">0x60000046bd80</span>&gt;&#123;number = <span class="number">1</span>, name = main&#125;</span><br><span class="line">ğŸ <span class="number">11</span> &lt;<span class="type">NSThread</span>: <span class="number">0x60000046bd80</span>&gt;&#123;number = <span class="number">1</span>, name = main&#125;</span><br><span class="line">ğŸ <span class="number">12</span> &lt;<span class="type">NSThread</span>: <span class="number">0x60000046bd80</span>&gt;&#123;number = <span class="number">1</span>, name = main&#125;</span><br><span class="line">ğŸ <span class="number">13</span> &lt;<span class="type">NSThread</span>: <span class="number">0x60000046bd80</span>&gt;&#123;number = <span class="number">1</span>, name = main&#125;</span><br><span class="line">ğŸ <span class="number">14</span> &lt;<span class="type">NSThread</span>: <span class="number">0x60000046bd80</span>&gt;&#123;number = <span class="number">1</span>, name = main&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>å¹¶è¡ŒåŒæ­¥</strong></p>
<ul>
<li>æ‰€æœ‰ä»»åŠ¡åœ¨åŒä¸€çº¿ç¨‹ï¼ˆä¸»çº¿ç¨‹ï¼‰æ‰§è¡Œï¼Œå› ä¸ºåŒæ­¥æ‰§è¡Œæ²¡æœ‰å¼€å¯æ–°çº¿ç¨‹çš„èƒ½åŠ›ã€‚</li>
<li>æ‰€æœ‰ä»»åŠ¡éƒ½æ˜¯æŒ‰é¡ºåºä¾æ¬¡æ‰§è¡Œçš„ã€‚è™½ç„¶å¹¶å‘é˜Ÿåˆ—å¯ä»¥å¼€å¯å¤šä¸ªçº¿ç¨‹ï¼ŒåŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡ã€‚ä½†æ˜¯å› ä¸ºæœ¬èº«ä¸èƒ½åˆ›å»ºæ–°çº¿ç¨‹ï¼Œæ‰€ä»¥ä¹Ÿå°±ä¸å­˜åœ¨å¹¶å‘ã€‚è€Œå½“å‰çº¿ç¨‹åªæœ‰ç­‰å¾…å½“å‰é˜Ÿåˆ—ä¸­æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡æ‰§è¡Œå®Œæ¯•åï¼Œæ‰èƒ½ç»§ç»­æ¥ç€æ‰§è¡Œï¼ˆåŒæ­¥ä»»åŠ¡éœ€è¦ç­‰å¾…é˜Ÿåˆ—çš„ä»»åŠ¡æ‰§è¡Œç»“æŸï¼‰ã€‚æ‰€ä»¥ä»»åŠ¡åªèƒ½ä¸€ä¸ªä¸€ä¸ªæŒ‰é¡ºåºæ‰§è¡Œï¼Œä¸èƒ½åŒæ—¶è¢«æ‰§è¡Œã€‚è¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆå¹¶å‘é˜Ÿåˆ—çš„å¹¶å‘åŠŸèƒ½åªä¼šåœ¨å¼‚æ­¥æ‰§è¡Œæ—¶æ‰ä¼šç”Ÿæ•ˆã€‚</li>
</ul>
</blockquote>
<h3 id="ç³»ç»Ÿæä¾›çš„ç°æœ‰é˜Ÿåˆ—"><a href="#ç³»ç»Ÿæä¾›çš„ç°æœ‰é˜Ÿåˆ—" class="headerlink" title="ç³»ç»Ÿæä¾›çš„ç°æœ‰é˜Ÿåˆ—"></a>ç³»ç»Ÿæä¾›çš„ç°æœ‰é˜Ÿåˆ—</h3><p>åˆ°è¿™é‡Œï¼Œæˆ‘ç›¸ä¿¡ä¸²è¡Œå¹¶è¡ŒåŒæ­¥å¼‚æ­¥å°±åº”è¯¥å®Œå…¨äº†è§£äº†ã€‚<br>ä½†æ˜¯ä¸Šè¿°éƒ½å±äºè‡ªå®šä¹‰é˜Ÿåˆ—ï¼Œé‚£å°±æ¥è¯´è¯´å¼€å‘ä¸­å¸¸ç”¨çš„ç°æœ‰é˜Ÿåˆ—ã€‚<br>GCD ä¸­çš„é˜Ÿåˆ—æœ‰å¦‚ä¸‹å‡ ç§ï¼š<br>ä¸»çº¿ç¨‹é˜Ÿåˆ—ï¼ˆ<code>DispatchQueue.main</code>ï¼‰<br>å…¨å±€å¹¶å‘é˜Ÿåˆ—ï¼ˆ<code>DispatchQueue.global()</code>ï¼‰<br>è‡ªå®šä¹‰é˜Ÿåˆ—<br>é˜Ÿåˆ—ç»„ï¼ˆ<code>DispatchGroup</code>ï¼‰</p>
<p>å†™æ­¤æ–‡æ—¶å€Ÿé‰´äº†å¦‚ä¸‹èµ„æ–™ï¼Œæ›´å¤šå…³äº GCD çš„èµ„æ–™è¯·çœ‹è¿™é‡Œ<br><a href="https://www.raywenderlich.com/5370-grand-central-dispatch-tutorial-for-swift-4-part-1-2" target="_blank" rel="noopener">Grand Central Dispatch Tutorial for Swift 4</a><br><a href="https://www.appcoda.com/grand-central-dispatch" target="_blank" rel="noopener">Grand Central Dispatch (GCD) and Dispatch Queues in Swift 3</a></p>

      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/04/21/å¶ç„¶å‘ç°çš„POSTè¯·æ±‚å‚æ•°é—®é¢˜/" rel="next" title="å¶ç„¶å‘ç°çš„POSTè¯·æ±‚å‚æ•°é—®é¢˜">
                <i class="fa fa-chevron-left"></i> å¶ç„¶å‘ç°çš„POSTè¯·æ±‚å‚æ•°é—®é¢˜
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">MorningStar</p>
              <p class="site-description motion-element" itemprop="description">Talk is cheap, show me the code</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">5</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              

              
            </nav>
          

          

          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="æ³Š" title="0" target="_blank">0</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="å­¦" title="1" target="_blank">1</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="ï¼š" title="2" target="_blank">2</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="h" title="3" target="_blank">3</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="t" title="4" target="_blank">4</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="t" title="5" target="_blank">5</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="p" title="6" target="_blank">6</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="s" title="7" target="_blank">7</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href=":" title="8" target="_blank">8</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="/" title="9" target="_blank">9</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="/" title="10" target="_blank">10</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="w" title="11" target="_blank">11</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="w" title="12" target="_blank">12</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="w" title="13" target="_blank">13</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="." title="14" target="_blank">14</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="b" title="15" target="_blank">15</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="o" title="16" target="_blank">16</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="x" title="17" target="_blank">17</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="u" title="18" target="_blank">18</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="e" title="19" target="_blank">19</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="i" title="20" target="_blank">20</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="o" title="21" target="_blank">21</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="." title="22" target="_blank">22</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="c" title="23" target="_blank">23</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="o" title="24" target="_blank">24</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="m" title="25" target="_blank">25</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="/" title="26" target="_blank">26</a>
                  </li>
                
              </ul>
            </div>
          

          
            
          
          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#CGD-çš„ç®€è¿°"><span class="nav-number">1.</span> <span class="nav-text">CGD çš„ç®€è¿°</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#GCD-çš„æ ¸å¿ƒ"><span class="nav-number">2.</span> <span class="nav-text">GCD çš„æ ¸å¿ƒ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ä»»åŠ¡åŠå…¶æ‰§è¡Œæ–¹å¼"><span class="nav-number">2.1.</span> <span class="nav-text">ä»»åŠ¡åŠå…¶æ‰§è¡Œæ–¹å¼</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#é˜Ÿåˆ—"><span class="nav-number">2.2.</span> <span class="nav-text">é˜Ÿåˆ—</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#é˜Ÿåˆ—ä»¥åŠæ‰§è¡Œæ–¹å¼çš„ç»„åˆä½¿ç”¨"><span class="nav-number">3.</span> <span class="nav-text">é˜Ÿåˆ—ä»¥åŠæ‰§è¡Œæ–¹å¼çš„ç»„åˆä½¿ç”¨</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Dispatch-Queue"><span class="nav-number">3.1.</span> <span class="nav-text">Dispatch Queue</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ä¸²è¡Œé˜Ÿåˆ—ï¼ˆSerial-Dispatch-Queueï¼‰"><span class="nav-number">3.2.</span> <span class="nav-text">ä¸²è¡Œé˜Ÿåˆ—ï¼ˆSerial Dispatch Queueï¼‰</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ä¸²è¡Œé˜Ÿåˆ—åŒæ­¥æ‰§è¡Œ"><span class="nav-number">3.2.1.</span> <span class="nav-text">ä¸²è¡Œé˜Ÿåˆ—åŒæ­¥æ‰§è¡Œ</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ä¸²è¡Œé˜Ÿåˆ—å¼‚æ­¥æ‰§è¡Œ"><span class="nav-number">3.2.2.</span> <span class="nav-text">ä¸²è¡Œé˜Ÿåˆ—å¼‚æ­¥æ‰§è¡Œ</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DispatchQoS"><span class="nav-number">3.3.</span> <span class="nav-text">DispatchQoS</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å¹¶è¡Œé˜Ÿåˆ—ï¼ˆConcurrent-Dispatch-Queueï¼‰"><span class="nav-number">3.4.</span> <span class="nav-text">å¹¶è¡Œé˜Ÿåˆ—ï¼ˆConcurrent Dispatch Queueï¼‰</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#å¹¶è¡Œé˜Ÿåˆ—å¼‚æ­¥æ‰§è¡Œ"><span class="nav-number">3.4.1.</span> <span class="nav-text">å¹¶è¡Œé˜Ÿåˆ—å¼‚æ­¥æ‰§è¡Œ</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#å¹¶è¡Œé˜Ÿåˆ—åŒæ­¥æ‰§è¡Œ"><span class="nav-number">3.4.2.</span> <span class="nav-text">å¹¶è¡Œé˜Ÿåˆ—åŒæ­¥æ‰§è¡Œ</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ç³»ç»Ÿæä¾›çš„ç°æœ‰é˜Ÿåˆ—"><span class="nav-number">3.5.</span> <span class="nav-text">ç³»ç»Ÿæä¾›çš„ç°æœ‰é˜Ÿåˆ—</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love" id="animate"> 
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">MorningStar</span>

  

  
</div>




  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/theme-next/hexo-theme-next">NexT.Muse</a> v6.0.6</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>














  













  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.0.6"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.0.6"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.0.6"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.0.6"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.0.6"></script>



  



	





  





  










  





  

  

  

  

  
  

  

  

  

  

</body>
</html>

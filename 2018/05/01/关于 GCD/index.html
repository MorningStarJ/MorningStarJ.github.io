<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.0.6" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.0.6">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.0.6">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.0.6">


  <link rel="mask-icon" href="/images/logo.svg?v=6.0.6" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '6.0.6',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="CGD 的简述GCD 全称 Grand Central Dispatch。简单来说就是 Apple 对于优化应用程序以及支持多核处理器所开发的多核编程的最新解决方案。本文主要对于开发中常用的进行简述，不会针对底层解析，想研究底层请看这里。 本文示例均采用 Swift 4 实现。Swift 3 以前在开发中使用 GCD 不是太友好 — 由于它的编程风格接近 C，与 Swift style 差别很大，">
<meta property="og:type" content="article">
<meta property="og:title" content="常用的 GCD">
<meta property="og:url" content="http://yoursite.com/2018/05/01/关于 GCD/index.html">
<meta property="og:site_name" content="Inception">
<meta property="og:description" content="CGD 的简述GCD 全称 Grand Central Dispatch。简单来说就是 Apple 对于优化应用程序以及支持多核处理器所开发的多核编程的最新解决方案。本文主要对于开发中常用的进行简述，不会针对底层解析，想研究底层请看这里。 本文示例均采用 Swift 4 实现。Swift 3 以前在开发中使用 GCD 不是太友好 — 由于它的编程风格接近 C，与 Swift style 差别很大，">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2018-09-07T10:52:00.793Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="常用的 GCD">
<meta name="twitter:description" content="CGD 的简述GCD 全称 Grand Central Dispatch。简单来说就是 Apple 对于优化应用程序以及支持多核处理器所开发的多核编程的最新解决方案。本文主要对于开发中常用的进行简述，不会针对底层解析，想研究底层请看这里。 本文示例均采用 Swift 4 实现。Swift 3 以前在开发中使用 GCD 不是太友好 — 由于它的编程风格接近 C，与 Swift style 差别很大，">






  <link rel="canonical" href="http://yoursite.com/2018/05/01/关于 GCD/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>常用的 GCD | Inception</title>
  









  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"> 

<div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Inception</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Stay Hungry Stay Foolish</p>
      
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        
          
  <li class="menu-item menu-item-home">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br />Home</a>
</li>

      
        
        
          
  <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />Archives</a>
</li>

      

      
    </ul>
  

  
    

  

  
</nav>


  



 </div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/01/关于 GCD/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="MorningStar">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Inception">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">常用的 GCD</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-01T13:20:14+08:00">2018-05-01</time>
            

            
            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="CGD-的简述"><a href="#CGD-的简述" class="headerlink" title="CGD 的简述"></a>CGD 的简述</h2><p>GCD 全称 <a href="https://en.wikipedia.org/wiki/Grand_Central_Dispatch" target="_blank" rel="noopener">Grand Central Dispatch</a>。<br>简单来说就是 Apple 对于优化应用程序以及支持多核处理器所开发的多核编程的最新解决方案。本文主要对于开发中常用的进行简述，不会针对底层解析，想研究底层请看<a href="https://apple.github.io/swift-corelibs-libdispatch/" target="_blank" rel="noopener">这里</a>。</p>
<p>本文示例均采用 Swift 4 实现。Swift 3 以前在开发中使用 GCD 不是太友好 — 由于它的编程风格接近 C，与 Swift style 差别很大，API 难记难用，即使在 Objective-C 中使用也不太方便。这也是很多开发者都使用 NSOperationQueue 而避免 GCD 的主要原因。</p>
<p>Swift 3 中 Apple 采用了全新的 Swift style 重写了 GCD，这使 GCD 在开发中的使用与之前完全截然不同，轻松上手，好记好用。否则，也不会有这篇文章了。<br><a id="more"></a></p>
<h2 id="GCD-的核心"><a href="#GCD-的核心" class="headerlink" title="GCD 的核心"></a>GCD 的核心</h2><h3 id="任务及其执行方式"><a href="#任务及其执行方式" class="headerlink" title="任务及其执行方式"></a>任务及其执行方式</h3><p>任务就是线程中要执行的代码，它可以随同队列的创建一起被创建，然后将这个任务添加指定的执行方式（<strong><em>同步执行</em></strong> 和<strong><em>异步执行</em></strong>）。</p>
<p>想象使用音乐播放器放歌，正在播放的歌就是<strong><font color="#D13720">执行的任务</font></strong>，音乐播放器是先创建了播放列表然后将你选的这首歌添加到播放列表（这就类似于上述的<strong><font color="#D13720">任务随着队列的创建一起创建</font></strong>），最后开始播放，也就是执行任务。</p>
<p>那<strong><em>同步执行</em></strong> 和<strong><em>异步执行</em></strong> 呢？<br>你先添加歌曲 1 到播放列表，然后添加歌曲 2 到播放列表。歌曲 1 正在播放时，同一音乐播放器的播放列表中的歌曲 2 是无法播放的，（假设此时无法打开另一个播放器，这就相当于不具备开启新线程能力）只能手动切换或是等待歌曲 1 播放完成后才可以播放歌曲 2，也就是必须歌曲 1 结束，歌曲 2 才能进行。<br>这就是<strong><em>同步执行</em></strong>。</p>
<p>歌曲 1 正在播放时，你打开了另一个播放器（开启新线程），播放歌曲 2，无需等待歌曲 1（任务）结束），这时两个播放器一起播放歌曲，同时播放歌曲 1 和歌曲 2。<br>这就是<strong><em>异步执行</em></strong>。</p>
<p>综上所述，二者之间的区别：</p>
<p><strong>同步执行：</strong></p>
<ul>
<li>必须一个任务执行结束才能执行下一个，换句话说，任务 1 执行时，任务 2 会一直等待到任务 1 执行完毕才会继续执行。</li>
<li>不具备开启新线程能力。</li>
</ul>
<p><strong>异步执行：</strong></p>
<ul>
<li>下一个任务无需任何等待，即使当前任务正在执行，也可以继续执行下一人任务。</li>
<li>具备开启新线程能力。</li>
</ul>
<blockquote>
<p><strong>By the way</strong><br>异步执行虽然具备开启新线程的能力，但是，是否可以开启新线程与队列类型有关。</p>
</blockquote>
<h3 id="队列"><a href="#队列" class="headerlink" title="队列"></a>队列</h3><p>Dispatch Queue。还是刚才的例子，先到添加到播放列表的先放，后添加的后放（FIFO）。<strong><font color="#D13720">队列</font></strong>就是指类似于播放列表这种<strong><font color="#D13720">执行任务的队列</font></strong>，列表中要播放的音乐就是要执行的<strong><font color="#D13720">任务</font></strong>。</p>
<p>队列是一种特殊的线性表，采用 FIFO（先进先出）的原则，队列上的任务也是遵循 FIFO 模式的，类似于栈（stack）那样。一旦创建完成系统直接接管，GCD 自己有线程管理池，无论多少队列，它们都会自动被系统正确管理。换句话说，我们只需要搞好任务、执行方式、队列，无需和线程直接打交道。</p>
<p>再来想象一下音乐播放器放歌，你只需要找到你想要播放的歌曲，然后添加到播放列表，你无须管理播放器什么时候切换下一曲。</p>
<p>一个队列是可以<strong>串行</strong>或者<strong>并行</strong>的。<br>串行队列就像一个播放器播放，并行队列就像多个播放器同时播放。</p>
<p>在<strong>串行队列（Serial Dispatch Queue）</strong>中，一个任务只有在前一个任务完成后才能执行（除非它是第一个任务），并且只能在一个线程中执行任务；<br>而在<strong>并行队列（Concurrent Dispatch Queue）</strong>中，所有的任务都可以同时（并发）执行。</p>
<blockquote>
<p><strong>By the way</strong></p>
<ul>
<li>FIFO = First In First Out</li>
<li>并行队列的并发功能只有在异步（async）函数下有效。</li>
<li>为主队列添加任务时，必须谨慎。因为主队列实时交互用户层面，所有关于 UI 的更新必须在主线程执行，如果在其他线程尝试更新常常会有意想不到的错误。</li>
<li>对于开发者来说，除了在主线程更新 UI 的任务，在哪条线程执行其他任务是未知的。</li>
</ul>
</blockquote>
<h2 id="队列以及执行方式的组合使用"><a href="#队列以及执行方式的组合使用" class="headerlink" title="队列以及执行方式的组合使用"></a>队列以及执行方式的组合使用</h2><h3 id="Dispatch-Queue"><a href="#Dispatch-Queue" class="headerlink" title="Dispatch Queue"></a>Dispatch Queue</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> queue = <span class="type">DispatchQueue</span>(label: <span class="string">"com.MorningStar.queue"</span>)</span><br></pre></td></tr></table></figure>
<p>这是创建 Dispatch Queue 的最简便方法，该方法有个参数<code>label</code>，该参数用于为队列创建一个标识符。</p>
<p>诺，现在有了队列，就来执行吧。</p>
<blockquote>
<p><strong>Note</strong></p>
<ul>
<li>简便方法创建的是串行队列。</li>
<li>不同的水果代表不同的队列，以便在 console 上清楚的识别打印内容。</li>
</ul>
</blockquote>
<h3 id="串行队列（Serial-Dispatch-Queue）"><a href="#串行队列（Serial-Dispatch-Queue）" class="headerlink" title="串行队列（Serial Dispatch Queue）"></a>串行队列（Serial Dispatch Queue）</h3><h4 id="串行队列同步执行"><a href="#串行队列同步执行" class="headerlink" title="串行队列同步执行"></a>串行队列同步执行</h4><p>先<code>sync</code>同步执行</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">queue.sync &#123;</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">1</span>..&lt;<span class="number">5</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"🍎"</span>, i)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">queue.sync &#123;</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">5</span>..&lt;<span class="number">10</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"🍎"</span>, i)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">Prints</span>：</span><br><span class="line">🍎 <span class="number">1</span></span><br><span class="line">🍎 <span class="number">2</span></span><br><span class="line">🍎 <span class="number">3</span></span><br><span class="line">🍎 <span class="number">4</span></span><br><span class="line">🍎 <span class="number">5</span></span><br><span class="line">🍎 <span class="number">6</span></span><br><span class="line">🍎 <span class="number">7</span></span><br><span class="line">🍎 <span class="number">8</span></span><br><span class="line">🍎 <span class="number">9</span></span><br></pre></td></tr></table></figure>
<p>代码与打印结果清晰的反应了，自定义队列在主线程上按顺序执行。</p>
<blockquote>
<p><strong>串行同步</strong><br>任务会在一条线程上顺序依次执行，并且不具备开启子线程能力。</p>
</blockquote>
<h4 id="串行队列异步执行"><a href="#串行队列异步执行" class="headerlink" title="串行队列异步执行"></a>串行队列异步执行</h4><p>接下来使用异步<code>async</code>会发生什么？<br>代码写成这样：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> queue1 = <span class="type">DispatchQueue</span>(label: <span class="string">"com.MorningStar.queue1"</span>)</span><br><span class="line"><span class="keyword">let</span> queue2 = <span class="type">DispatchQueue</span>(label: <span class="string">"com.MorningStar.queue2"</span>)</span><br><span class="line"></span><br><span class="line">queue1.async &#123;</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">1</span>..&lt;<span class="number">5</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"🍎"</span>, i)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">queue1.async &#123;</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">5</span>..&lt;<span class="number">10</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"🍎"</span>, i)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">queue2.async &#123;</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">10</span>..&lt;<span class="number">15</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"🍐"</span>, i)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">Prints</span>：</span><br><span class="line">🍎 <span class="number">1</span></span><br><span class="line">🍎 <span class="number">2</span></span><br><span class="line">🍎 <span class="number">3</span></span><br><span class="line">🍎 <span class="number">4</span></span><br><span class="line">🍐 <span class="number">10</span></span><br><span class="line">🍐 <span class="number">11</span></span><br><span class="line">🍐 <span class="number">12</span></span><br><span class="line">🍐 <span class="number">13</span></span><br><span class="line">🍐 <span class="number">14</span></span><br><span class="line">🍎 <span class="number">5</span></span><br><span class="line">🍎 <span class="number">6</span></span><br><span class="line">🍎 <span class="number">7</span></span><br><span class="line">🍎 <span class="number">8</span></span><br><span class="line">🍎 <span class="number">9</span></span><br></pre></td></tr></table></figure>
<p>这次的打印结果似乎有点意思，如果你多执行几次或许会发现每次输出的结果可能都不一样。无论 queue 2 中的任务何时执行（打印），这两个队列中任务的执行（打印）顺序是不变的, 🍎 的打印结果永远是 1-9 的顺序排列，🍐永远是 10-14，这也就证明了之前提到的观点：</p>
<blockquote>
<p><strong>串行异步</strong></p>
<ul>
<li>同一串行队列的任务即使是异步执行也只在同一线程上按顺序依次执行。</li>
<li>不同串行队列异步执行，有几条串行队列异步执行，就会有几条线程。也就是说串行队列只会开启一条新线程或者不开启新线程，在当前线执行。但是同一串行队列上的任务（不论何种执行方式）只会在负责该队列的一条线程顺序执行。</li>
<li>队列执行完毕顺序只和（接下来说到的）Qos（优先级）有关。</li>
</ul>
</blockquote>
<p>如果有兴趣，可在代码中多添加几条串行队列，并在异步执行任务的输出时打印线程试试结果。</p>
<h3 id="DispatchQoS"><a href="#DispatchQoS" class="headerlink" title="DispatchQoS"></a>DispatchQoS</h3><p>有些时候我们使用 GCD 执行任务时需要对任务有个先后排序，哪些先执行，哪些后执行，也就是任务的优先级。</p>
<p>回想一下，或许你会想起之前简便创建 <code>DispatchQueue</code> 时 Xcode 提示了一个构造方法：<br><code>DispatchQueue(label:qos:attributes:autoreleaseFrequency:target:)</code><br>该方法的第二个构造参数名就是 qos（Quality Of Service），其参数类型是<code>DispatchQoS</code>。会用于指定任务重要程度以及优先级的信息。<br>Xcode 的开发者文档对于 <code>DispatchQoS</code>有如下解释：</p>
<blockquote>
<p>Higher priority work is performed more quickly and with more resources than lower priority work, it typically requires more energy than lower priority work. Accurately specifying appropriate QoS classes for the work your app performs ensures that your app is responsive and energy efficient.</p>
</blockquote>
<p>翻翻代码：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">struct</span> <span class="title">DispatchQoS</span> : <span class="title">Equatable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">let</span> qosClass: <span class="type">DispatchQoS</span>.<span class="type">QoSClass</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">enum</span> <span class="title">QoSClass</span> </span>&#123;</span><br><span class="line">        <span class="keyword">case</span> unspecified</span><br><span class="line"></span><br><span class="line">        <span class="meta">@available</span>(<span class="type">OSX</span> <span class="number">10.10</span>, iOS <span class="number">8.0</span>, *)</span><br><span class="line">        <span class="keyword">case</span> background</span><br><span class="line"></span><br><span class="line">        <span class="meta">@available</span>(<span class="type">OSX</span> <span class="number">10.10</span>, iOS <span class="number">8.0</span>, *)</span><br><span class="line">        <span class="keyword">case</span> utility</span><br><span class="line"></span><br><span class="line">        <span class="meta">@available</span>(<span class="type">OSX</span> <span class="number">10.10</span>, iOS <span class="number">8.0</span>, *)</span><br><span class="line">        <span class="keyword">case</span> `<span class="keyword">default</span>`</span><br><span class="line"></span><br><span class="line">        <span class="meta">@available</span>(<span class="type">OSX</span> <span class="number">10.10</span>, iOS <span class="number">8.0</span>, *)</span><br><span class="line">        <span class="keyword">case</span> userInitiated</span><br><span class="line"></span><br><span class="line">        <span class="meta">@available</span>(<span class="type">OSX</span> <span class="number">10.10</span>, iOS <span class="number">8.0</span>, *)</span><br><span class="line">        <span class="keyword">case</span> userInteractive</span><br></pre></td></tr></table></figure>
<p>我们可以根据需求使用合适的 QoS 值来初始化队列。如果没有指定 QoS，则队列会使用默认优先级进行初始化。上面的枚举 <code>QoSClass</code> 的 case 是从低到高优先级的排序。</p>
<p>现在把代码改成这样：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> queue1 = <span class="type">DispatchQueue</span>(label: <span class="string">"com.MorningStar.queue1"</span>, qos: .userInitiated)</span><br><span class="line"><span class="keyword">let</span> queue2 = <span class="type">DispatchQueue</span>(label: <span class="string">"com.MorningStar.queue2"</span>, qos: .utility)</span><br><span class="line"></span><br><span class="line">queue1.async &#123;</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">1</span>..&lt;<span class="number">5</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"🍎"</span>, i)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">queue2.async &#123;</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">10</span>..&lt;<span class="number">15</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"🍐"</span>, i)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">queue1.async &#123;</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">5</span>..&lt;<span class="number">10</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"🍎"</span>, i)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">Prints</span>：</span><br><span class="line">🍎 <span class="number">1</span>  🍐 <span class="number">10</span></span><br><span class="line">🍎 <span class="number">2</span>  🍎 <span class="number">1</span></span><br><span class="line">🍎 <span class="number">3</span>  🍎 <span class="number">2</span></span><br><span class="line">🍎 <span class="number">4</span>  🍎 <span class="number">3</span></span><br><span class="line">🍎 <span class="number">5</span>  🍎 <span class="number">4</span></span><br><span class="line">🍎 <span class="number">6</span>  🍎 <span class="number">5</span></span><br><span class="line">🍎 <span class="number">7</span>  🍎 <span class="number">6</span></span><br><span class="line">🍎 <span class="number">8</span>  🍎 <span class="number">7</span></span><br><span class="line">🍎 <span class="number">9</span>  🍎 <span class="number">8</span></span><br><span class="line">🍐 <span class="number">10</span> 🍎 <span class="number">9</span></span><br><span class="line">🍐 <span class="number">11</span> 🍐 <span class="number">11</span></span><br><span class="line">🍐 <span class="number">12</span> 🍐 <span class="number">12</span></span><br><span class="line">🍐 <span class="number">13</span> 🍐 <span class="number">13</span></span><br><span class="line">🍐 <span class="number">14</span> 🍐 <span class="number">14</span></span><br></pre></td></tr></table></figure>
<p>上面代码每次执行的结果可能不同，我只提取了两种结果，但是可以清晰的看出 queue 1 比 queue 2 执行任务要快，因为 queue 1 优先级高，即使 queue 2 获得了执行的机会，但是系统还是会先把资源优先供给 queue 1，queue 1 结束后才会关注 queue 2。</p>
<blockquote>
<p>Note</p>
<ul>
<li>主线程执行的任务永远是最高优先级。</li>
<li>优先级代表执行完成的速度。</li>
<li>当然如果创建时并不指定优先级参数(Qos)，也不会有任何问题，它会被设为默认级别。</li>
</ul>
</blockquote>
<h3 id="并行队列（Concurrent-Dispatch-Queue）"><a href="#并行队列（Concurrent-Dispatch-Queue）" class="headerlink" title="并行队列（Concurrent Dispatch Queue）"></a>并行队列（Concurrent Dispatch Queue）</h3><p>如果我们向串行队列加入 N 个任务，就像在一个音乐播放器的播放列表中添加了 N 首歌曲，它会按照顺序依次播放。</p>
<p>但如果你想让多个任务同时执行，那么，<strong>并行队列</strong>，了解一下？！</p>
<h4 id="并行队列异步执行"><a href="#并行队列异步执行" class="headerlink" title="并行队列异步执行"></a>并行队列异步执行</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> concurrentQueue = <span class="type">DispatchQueue</span>(label: <span class="string">"concurrent"</span>, qos: .utility, attributes: .concurrent)</span><br><span class="line"></span><br><span class="line">concurrentQueue.async &#123;</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">1</span>..&lt;<span class="number">5</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"🍎"</span>, i, <span class="type">Thread</span>.current)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">concurrentQueue.async &#123;</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">5</span>..&lt;<span class="number">10</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"🍊"</span>, i, <span class="type">Thread</span>.current)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">concurrentQueue.async &#123;</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">10</span>..&lt;<span class="number">15</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"🍐"</span>, i, <span class="type">Thread</span>.current)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">Prints</span>:</span><br><span class="line">🍎 <span class="number">1</span> &lt;<span class="type">NSThread</span>: <span class="number">0x600001fe69c0</span>&gt;&#123;number = <span class="number">4</span>, name = (null)&#125;</span><br><span class="line">🍎 <span class="number">2</span> &lt;<span class="type">NSThread</span>: <span class="number">0x600001fe69c0</span>&gt;&#123;number = <span class="number">4</span>, name = (null)&#125;</span><br><span class="line">🍐 <span class="number">10</span> &lt;<span class="type">NSThread</span>: <span class="number">0x600001fc4b80</span>&gt;&#123;number = <span class="number">5</span>, name = (null)&#125;</span><br><span class="line">🍊 <span class="number">5</span> &lt;<span class="type">NSThread</span>: <span class="number">0x600001fcef00</span>&gt;&#123;number = <span class="number">3</span>, name = (null)&#125;</span><br><span class="line">🍊 <span class="number">6</span> &lt;<span class="type">NSThread</span>: <span class="number">0x600001fcef00</span>&gt;&#123;number = <span class="number">3</span>, name = (null)&#125;</span><br><span class="line">🍊 <span class="number">7</span> &lt;<span class="type">NSThread</span>: <span class="number">0x600001fcef00</span>&gt;&#123;number = <span class="number">3</span>, name = (null)&#125;</span><br><span class="line">🍊 <span class="number">8</span> &lt;<span class="type">NSThread</span>: <span class="number">0x600001fcef00</span>&gt;&#123;number = <span class="number">3</span>, name = (null)&#125;</span><br><span class="line">🍊 <span class="number">9</span> &lt;<span class="type">NSThread</span>: <span class="number">0x600001fcef00</span>&gt;&#123;number = <span class="number">3</span>, name = (null)&#125;</span><br><span class="line">🍎 <span class="number">3</span> &lt;<span class="type">NSThread</span>: <span class="number">0x600001fe69c0</span>&gt;&#123;number = <span class="number">4</span>, name = (null)&#125;</span><br><span class="line">🍎 <span class="number">4</span> &lt;<span class="type">NSThread</span>: <span class="number">0x600001fe69c0</span>&gt;&#123;number = <span class="number">4</span>, name = (null)&#125;</span><br><span class="line">🍐 <span class="number">11</span> &lt;<span class="type">NSThread</span>: <span class="number">0x600001fc4b80</span>&gt;&#123;number = <span class="number">5</span>, name = (null)&#125;</span><br><span class="line">🍐 <span class="number">12</span> &lt;<span class="type">NSThread</span>: <span class="number">0x600001fc4b80</span>&gt;&#123;number = <span class="number">5</span>, name = (null)&#125;</span><br><span class="line">🍐 <span class="number">13</span> &lt;<span class="type">NSThread</span>: <span class="number">0x600001fc4b80</span>&gt;&#123;number = <span class="number">5</span>, name = (null)&#125;</span><br><span class="line">🍐 <span class="number">14</span> &lt;<span class="type">NSThread</span>: <span class="number">0x600001fc4b80</span>&gt;&#123;number = <span class="number">5</span>, name = (null)&#125;</span><br></pre></td></tr></table></figure>
<p>看哦，创建 <code>DispatchQueue</code> 的构造方法多个一个构造参数 <code>attributes</code>，该参数被指定为 <code>concurrent</code>，也就是<code>concurrentQueue</code>被设置为并行队列，该队列上的所有任务会被同时执行，否则就是串行队列。</p>
<p>打印结果清晰的显示每种水果所在的线程都是不同的，这说明<code>concurrentQueue</code>队列实际在三个线程上执行了任务。</p>
<blockquote>
<p><strong>并行异步</strong></p>
<ul>
<li>除了当前线程（主线程），系统又开启了3个线程，并且任务是交替/同时执行的。异步执行具备开启新线程的能力且并发队列可以开启多个线程，同时执行多个任务。</li>
<li>并行队列的并发功能只有在异步（async）函数下有效。</li>
</ul>
</blockquote>
<h4 id="并行队列同步执行"><a href="#并行队列同步执行" class="headerlink" title="并行队列同步执行"></a>并行队列同步执行</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> concurrentQueue = <span class="type">DispatchQueue</span>(label: <span class="string">"concurrent"</span>, attributes: .concurrent)</span><br><span class="line"></span><br><span class="line">concurrentQueue.sync &#123;</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">1</span>..&lt;<span class="number">5</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"🍎"</span>, i, <span class="type">Thread</span>.current)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">concurrentQueue.sync &#123;</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">5</span>..&lt;<span class="number">10</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"🍊"</span>, i, <span class="type">Thread</span>.current)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">concurrentQueue.sync &#123;</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">10</span>..&lt;<span class="number">15</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"🍐"</span>, i, <span class="type">Thread</span>.current)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">Prints</span>:</span><br><span class="line">🍎 <span class="number">1</span> &lt;<span class="type">NSThread</span>: <span class="number">0x60000046bd80</span>&gt;&#123;number = <span class="number">1</span>, name = main&#125;</span><br><span class="line">🍎 <span class="number">2</span> &lt;<span class="type">NSThread</span>: <span class="number">0x60000046bd80</span>&gt;&#123;number = <span class="number">1</span>, name = main&#125;</span><br><span class="line">🍎 <span class="number">3</span> &lt;<span class="type">NSThread</span>: <span class="number">0x60000046bd80</span>&gt;&#123;number = <span class="number">1</span>, name = main&#125;</span><br><span class="line">🍎 <span class="number">4</span> &lt;<span class="type">NSThread</span>: <span class="number">0x60000046bd80</span>&gt;&#123;number = <span class="number">1</span>, name = main&#125;</span><br><span class="line">🍊 <span class="number">5</span> &lt;<span class="type">NSThread</span>: <span class="number">0x60000046bd80</span>&gt;&#123;number = <span class="number">1</span>, name = main&#125;</span><br><span class="line">🍊 <span class="number">6</span> &lt;<span class="type">NSThread</span>: <span class="number">0x60000046bd80</span>&gt;&#123;number = <span class="number">1</span>, name = main&#125;</span><br><span class="line">🍊 <span class="number">7</span> &lt;<span class="type">NSThread</span>: <span class="number">0x60000046bd80</span>&gt;&#123;number = <span class="number">1</span>, name = main&#125;</span><br><span class="line">🍊 <span class="number">8</span> &lt;<span class="type">NSThread</span>: <span class="number">0x60000046bd80</span>&gt;&#123;number = <span class="number">1</span>, name = main&#125;</span><br><span class="line">🍊 <span class="number">9</span> &lt;<span class="type">NSThread</span>: <span class="number">0x60000046bd80</span>&gt;&#123;number = <span class="number">1</span>, name = main&#125;</span><br><span class="line">🍐 <span class="number">10</span> &lt;<span class="type">NSThread</span>: <span class="number">0x60000046bd80</span>&gt;&#123;number = <span class="number">1</span>, name = main&#125;</span><br><span class="line">🍐 <span class="number">11</span> &lt;<span class="type">NSThread</span>: <span class="number">0x60000046bd80</span>&gt;&#123;number = <span class="number">1</span>, name = main&#125;</span><br><span class="line">🍐 <span class="number">12</span> &lt;<span class="type">NSThread</span>: <span class="number">0x60000046bd80</span>&gt;&#123;number = <span class="number">1</span>, name = main&#125;</span><br><span class="line">🍐 <span class="number">13</span> &lt;<span class="type">NSThread</span>: <span class="number">0x60000046bd80</span>&gt;&#123;number = <span class="number">1</span>, name = main&#125;</span><br><span class="line">🍐 <span class="number">14</span> &lt;<span class="type">NSThread</span>: <span class="number">0x60000046bd80</span>&gt;&#123;number = <span class="number">1</span>, name = main&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>并行同步</strong></p>
<ul>
<li>所有任务在同一线程（主线程）执行，因为同步执行没有开启新线程的能力。</li>
<li>所有任务都是按顺序依次执行的。虽然并发队列可以开启多个线程，同时执行多个任务。但是因为本身不能创建新线程，所以也就不存在并发。而当前线程只有等待当前队列中正在执行的任务执行完毕后，才能继续接着执行（同步任务需要等待队列的任务执行结束）。所以任务只能一个一个按顺序执行，不能同时被执行。这也就是为什么并发队列的并发功能只会在异步执行时才会生效。</li>
</ul>
</blockquote>
<h3 id="系统提供的现有队列"><a href="#系统提供的现有队列" class="headerlink" title="系统提供的现有队列"></a>系统提供的现有队列</h3><p>到这里，我相信串行并行同步异步就应该完全了解了。<br>但是上述都属于自定义队列，那就来说说开发中常用的现有队列。<br>GCD 中的队列有如下几种：<br>主线程队列（<code>DispatchQueue.main</code>）<br>全局并发队列（<code>DispatchQueue.global()</code>）<br>自定义队列<br>队列组（<code>DispatchGroup</code>）</p>
<p>写此文时借鉴了如下资料，更多关于 GCD 的资料请看这里<br><a href="https://www.raywenderlich.com/5370-grand-central-dispatch-tutorial-for-swift-4-part-1-2" target="_blank" rel="noopener">Grand Central Dispatch Tutorial for Swift 4</a><br><a href="https://www.appcoda.com/grand-central-dispatch" target="_blank" rel="noopener">Grand Central Dispatch (GCD) and Dispatch Queues in Swift 3</a></p>

      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/04/21/偶然发现的POST请求参数问题/" rel="next" title="偶然发现的POST请求参数问题">
                <i class="fa fa-chevron-left"></i> 偶然发现的POST请求参数问题
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">MorningStar</p>
              <p class="site-description motion-element" itemprop="description">Talk is cheap, show me the code</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">5</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              

              
            </nav>
          

          

          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="泊" title="0" target="_blank">0</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="学" title="1" target="_blank">1</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="：" title="2" target="_blank">2</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="h" title="3" target="_blank">3</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="t" title="4" target="_blank">4</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="t" title="5" target="_blank">5</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="p" title="6" target="_blank">6</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="s" title="7" target="_blank">7</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href=":" title="8" target="_blank">8</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="/" title="9" target="_blank">9</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="/" title="10" target="_blank">10</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="w" title="11" target="_blank">11</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="w" title="12" target="_blank">12</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="w" title="13" target="_blank">13</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="." title="14" target="_blank">14</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="b" title="15" target="_blank">15</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="o" title="16" target="_blank">16</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="x" title="17" target="_blank">17</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="u" title="18" target="_blank">18</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="e" title="19" target="_blank">19</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="i" title="20" target="_blank">20</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="o" title="21" target="_blank">21</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="." title="22" target="_blank">22</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="c" title="23" target="_blank">23</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="o" title="24" target="_blank">24</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="m" title="25" target="_blank">25</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="/" title="26" target="_blank">26</a>
                  </li>
                
              </ul>
            </div>
          

          
            
          
          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#CGD-的简述"><span class="nav-number">1.</span> <span class="nav-text">CGD 的简述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#GCD-的核心"><span class="nav-number">2.</span> <span class="nav-text">GCD 的核心</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#任务及其执行方式"><span class="nav-number">2.1.</span> <span class="nav-text">任务及其执行方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#队列"><span class="nav-number">2.2.</span> <span class="nav-text">队列</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#队列以及执行方式的组合使用"><span class="nav-number">3.</span> <span class="nav-text">队列以及执行方式的组合使用</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Dispatch-Queue"><span class="nav-number">3.1.</span> <span class="nav-text">Dispatch Queue</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#串行队列（Serial-Dispatch-Queue）"><span class="nav-number">3.2.</span> <span class="nav-text">串行队列（Serial Dispatch Queue）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#串行队列同步执行"><span class="nav-number">3.2.1.</span> <span class="nav-text">串行队列同步执行</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#串行队列异步执行"><span class="nav-number">3.2.2.</span> <span class="nav-text">串行队列异步执行</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DispatchQoS"><span class="nav-number">3.3.</span> <span class="nav-text">DispatchQoS</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#并行队列（Concurrent-Dispatch-Queue）"><span class="nav-number">3.4.</span> <span class="nav-text">并行队列（Concurrent Dispatch Queue）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#并行队列异步执行"><span class="nav-number">3.4.1.</span> <span class="nav-text">并行队列异步执行</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#并行队列同步执行"><span class="nav-number">3.4.2.</span> <span class="nav-text">并行队列同步执行</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#系统提供的现有队列"><span class="nav-number">3.5.</span> <span class="nav-text">系统提供的现有队列</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love" id="animate"> 
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">MorningStar</span>

  

  
</div>




  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/theme-next/hexo-theme-next">NexT.Muse</a> v6.0.6</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>














  













  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.0.6"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.0.6"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.0.6"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.0.6"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.0.6"></script>



  



	





  





  










  





  

  

  

  

  
  

  

  

  

  

</body>
</html>
